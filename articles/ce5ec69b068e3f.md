---
title: 'Prismaã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³å•é¡Œã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚ã’ã‚‹æ™‚ã«ãƒãƒã£ãŸã“ã¨'
emoji: 'ğŸŒ'
type: 'tech' # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['prisma']
published: false
---

# ã¯ã˜ã‚ã«

ã“ã®è¨˜äº‹ã¯ã€ŒMedleyï¼ˆãƒ¡ãƒ‰ãƒ¬ãƒ¼ï¼‰ Advent Calendar 2024ã€5 æ—¥ç›®ã®è¨˜äº‹ã§ã™ï¼

https://qiita.com/advent-calendar/2024/medley

ã“ã‚“ã«ã¡ã¯ã€ãƒ¡ãƒ‰ãƒ¬ãƒ¼ã®äººæãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æœ¬éƒ¨ã§ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’ã—ã¦ã„ã‚‹æ‰‹å¶‹ã§ã™ã€‚ç§ãŒé–‹ç™ºã‚’æ‹…å½“ã—ã¦ã„ã‚‹[ã‚¸ãƒ§ãƒ–ãƒ¡ãƒ‰ãƒ¬ãƒ¼ã‚¢ã‚«ãƒ‡ãƒŸãƒ¼](https://jm-academy.jp/)ã§ã¯ã€ORM ã« [Prisma](https://www.prisma.io/) ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ä»Šå›ã¯ãã® Prisma ã‚’ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã—ãŸéš›ã«ç›´é¢ã—ãŸå•é¡Œã‚„ãƒãƒã‚Šãƒã‚¤ãƒ³ãƒˆã‚’å…±æœ‰ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

# Prisma ã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³å•é¡Œã«ã¤ã„ã¦

ä»Šå›ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§ã¯ã€Prisma ã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³å•é¡Œã«å¯¾å¿œã™ã‚‹ãŸã‚ã®å®Ÿè£…ãŒæ„å›³ã—ãªã„æŒ™å‹•ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚ãã®ãŸã‚ã€ã¾ãšã¯ Prisma ã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³å•é¡Œã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

Prisma ã§ã¯ã€æ—¥æ™‚ãƒ‡ãƒ¼ã‚¿ã¯ DB ã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³è¨­å®šã«é–¢ä¿‚ãªãå¸¸ã« UTC æ™‚é–“ã§ä¿å­˜ã•ã‚Œã¾ã™ã€‚ã“ã®ä»•æ§˜ã«é–¢ã™ã‚‹å•é¡Œã¯ã€ç´„ 4 å¹´å‰ã‹ã‚‰ issue ãŒä¸ŠãŒã£ã¦ã„ã¾ã™ãŒã€2024 å¹´ 12 æœˆç¾åœ¨ã‚‚è§£æ±ºã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

https://github.com/prisma/prisma/issues/5051

ä¸Šè¨˜ã®å•é¡Œã«ã¤ã„ã¦ã¯ã€æœ¬æ¥ã§ã‚ã‚Œã° DB ã« UTC æ™‚é–“ã§ä¿å­˜ã™ã‚Œã°è§£æ±ºã—ã¾ã™ã€‚ã—ã‹ã—ã€ã‚¸ãƒ§ãƒ–ãƒ¡ãƒ‰ãƒ¬ãƒ¼ã‚¢ã‚«ãƒ‡ãƒŸãƒ¼ã¯åˆ¥ä¼šç¤¾ã‹ã‚‰é‹å–¶ã‚’å¼•ãç¶™ã„ã æ­´å²çš„èƒŒæ™¯ãŒã‚ã‚Šã€DB å†…ã®æ—¥æ™‚ãƒ‡ãƒ¼ã‚¿ãŒã™ã§ã« JST æ™‚é–“ã§ä¿å­˜ã•ã‚Œã„ã‚‹çŠ¶æ…‹ã ã£ãŸã®ã§ã€JST ã§ã®ä¿å­˜ã‚’ç¶™ç¶šã—ã¦é‹ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚

## ã©ã®ã‚ˆã†ã«å¯¾å¿œã—ã¦ã„ã‚‹ã‹

ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³å•é¡Œã«å¯¾ã—ã¦ã¯ã€ UTC ã¨ JST ã®æ™‚å·®ã‚’èª¿æ•´ã™ã‚‹ [Prisma Middleware](https://www.prisma.io/docs/orm/prisma-client/client-extensions/middleware) ã§å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ã€ã‚ˆãä½¿ã‚ã‚Œã¦ã„ã‚‹ãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ©ã‚¦ãƒ³ãƒ‰ã®ä¸€ã¤ã ã¨æ€ã„ã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯å…ˆã»ã©ç´¹ä»‹ã—ãŸ [issue å†…ã®ã‚³ãƒ¡ãƒ³ãƒˆ](https://github.com/prisma/prisma/issues/5051#issuecomment-878106427)ã‹ã‚‰å¼•ç”¨ã—ã¦ã„ã¾ã™ã€‚
::::details middleware ã®å®Ÿè£…ä¾‹

```TypeScript
// Subtract 9 hours from all the Date objects recursively
function subtract9Hours(obj: Record<string, unknown>) {
  if (!obj) return

  for (const key of Object.keys(obj)) {
    const val = obj[key]

    if (val instanceof Date) {
      obj[key] = dayjs(val).subtract(9, 'hour').toDate()
    } else if (!isPrimitive(val)) {
      subtract9Hours(val as any)
    }
  }
}

function prismaTimeMod<T>(value: T): T {
  if (value instanceof Date) {
    return dayjs(value).subtract(9, 'hour').toDate() as any
  }

  if (isPrimitive(value)) {
    return value
  }

  subtract9Hours(value as any)

  return value
}

// Create a prisma client instance with timemod
const prisma = new PrismaClient()

prisma.$use(async (params, next) => {
    const result = await next(params)

    return prismaTimeMod(result)
})
```

::::
ã‚¸ãƒ§ãƒ–ãƒ¡ãƒ‰ãƒ¬ãƒ¼ã‚¢ã‚«ãƒ‡ãƒŸãƒ¼ã§ã¯ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’å‚è€ƒã«ã€Prisma Middleware ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€DB ã«æ¸¡ã™ãƒ‡ãƒ¼ã‚¿(where ã‚„ data ãªã©)ã« Date å‹ã®ã‚‚ã®ãŒå«ã¾ã‚Œã¦ã„ã‚Œã°ã€ãã‚Œã«å¯¾ã—ã¦ **9 æ™‚é–“ãƒ—ãƒ©ã‚¹**ã—ã€DB ã‹ã‚‰å‡ºåŠ›ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã« Date å‹ã®ã‚‚ã®ãŒå«ã¾ã‚Œã¦ã„ã‚Œã°ã€ãã‚Œã«å¯¾ã—ã¦ **9 æ™‚é–“ãƒã‚¤ãƒŠã‚¹**ã™ã‚‹ã‚ˆã†ã«ã€Prisma ã® middleware ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

ä»¥ä¸‹ã®å›³ã®ã‚ˆã†ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚
![](/images/prisma-upgrade/middleware.png)

# ä»Šå›ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§èµ·ããŸäº‹è±¡

Prisma ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ 5.9.1 ã‹ã‚‰ 5.19.1 ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ã¨ã€`$queryRaw` ã§å–å¾—ã—ãŸæ—¥æ™‚ãƒ‡ãƒ¼ã‚¿ã®å€¤ã«å·®ãŒç”Ÿã˜ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

```typescript
const result = await prisma.$queryRaw`
  SELECT CAST('2024-10-01 10:00:00' AS timestamp);
`;
console.log(result);

// 9æ™‚é–“ãƒã‚¤ãƒŠã‚¹ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸ
[ { timestamp: 2024-10-01T10:00:00.000Z } ]  // before
[ { timestamp: 2024-10-01T01:00:00.000Z } ]  // after
```

# ã‚„ã£ãŸã“ã¨

## ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’ç¢ºèªã™ã‚‹

- `$queryRaw` ä»¥å¤–ï¼ˆ`findMany`ãªã©ï¼‰ã§å–å¾—ã—ãŸ Date å‹ã®å€¤ã¯å¤‰åŒ–ãŒãªã‹ã£ãŸ
- `$queryRaw` ã¯ middleware ã‚’ä»‹ã—ã¦ Prisma ã®ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã§ããªã„èªè­˜ã ã£ãŸ
  - ã—ãŸãŒã£ã¦ DB ã®æ—¥æ™‚ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ãŸéš›ã«ãƒã‚¤ãƒŠã‚¹ 9 æ™‚é–“ã•ã‚Œã¦ã„ãªã„
- `$queryRaw` ã®çµæœã¨ã—ã¦è¿”ã•ã‚Œã‚‹å€¤ã«ã€ã¡ã‚‡ã†ã© 9 æ™‚é–“ã®ã‚ºãƒ¬ãŒè¦‹ã‚‰ã‚ŒãŸ

ã“ã‚Œã‚‰ã®äº‹å®Ÿã‹ã‚‰ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã«ã‚ˆã£ã¦ `$queryRaw` ã‚„ middleware ã®æŒ™å‹•ãŒå¤‰æ›´ã•ã‚ŒãŸå¯èƒ½æ€§ãŒã‚ã‚‹ã¨è€ƒãˆã¾ã—ãŸã€‚ã—ã‹ã—ã€ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’ç¢ºèªã—ã¦ã‚‚è©²å½“ã™ã‚‹å¤‰æ›´ç‚¹ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚

## `$queryRaw` ã®æŒ™å‹•ç¢ºèª

`$queryRaw` ã«å•é¡ŒãŒã‚ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã¨è€ƒãˆãŸãŸã‚ã€å‘¼ã³å‡ºã—ã‹ã‚‰å®Ÿè¡ŒçµæœãŒè¿”ã‚‹ã¾ã§ã®æµã‚Œã‚’æ•´ç†ã—ã¾ã—ãŸã€‚å‘¼ã³å‡ºã—å…ƒã‚„ PostgreSQL ã«å¤‰æ›´ã¯ãªã„ã¯ãšãªã®ã§ã€ãã‚Œä»¥å¤–ã®ç®‡æ‰€ã«ãƒ­ã‚°ã‚’è¿½åŠ ã—ã¦èª¿æŸ»ã‚’é€²ã‚ã¾ã—ãŸã€‚

![](/images/prisma-upgrade/flowchart.png =500x)

å…ˆã»ã©ã®å›³ã®`ï¼ˆï¼“ï¼‰`éƒ¨åˆ†ã«è©²å½“ã™ã‚‹ã‚¯ã‚¨ãƒªå®Ÿè¡Œçµæœã®ãƒ­ã‚°ã‚’ç¢ºèªã—ãŸã¨ã“ã‚ã€Prisma ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã£ã¦çµæœãŒä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰åŒ–ã—ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã—ãŸã€‚

```TypeScript
// ä»¥ä¸‹ã‚’å®Ÿè¡Œ
const result = await prisma.$queryRaw`
  SELECT CAST('2024-10-01 10:00:00' AS timestamp);
`;

// ï¼ˆï¼“ï¼‰éƒ¨åˆ†ã®ãƒ­ã‚°ã‚’ç¢ºèª
// before: æ–‡å­—åˆ—å‹ã®å€¤ã«ãªã£ã¦ã„ã‚‹
[
  {
    timestamp: {
      prisma__type: 'datetime',
      prisma__value: '2024-10-01T10:00:00+00:00'
    }
  }
]
// after: Dateå‹ã®å€¤ã«ãªã£ã¦ã„ã‚‹
[ { timestamp: 2024-10-01T10:00:00.000Z } ]
```

# åŸå› 

ä»Šå›ã®äº‹è±¡ã¯ã€Prisma ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã«ã‚ˆã‚Šã€`$queryRaw` ã§æ—¥æ™‚ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã‚¯ã‚¨ãƒªã®è¿”ã‚Šå€¤ãŒ **æ–‡å­—åˆ—å‹ã‹ã‚‰ Date å‹ã«å¤‰åŒ–ã—ãŸ** ã“ã¨ãŒåŸå› ã§ã—ãŸã€‚ãã®çµæœã€middleware å†…ã® 9 æ™‚é–“ãƒã‚¤ãƒŠã‚¹å‡¦ç†ãŒæœ‰åŠ¹ã«ãªã‚Šã€ãƒ‡ãƒ¼ã‚¿ã«ã‚ºãƒ¬ãŒç”Ÿã˜ã¾ã—ãŸã€‚

ã¾ãŸã€ã“ã‚Œã¾ã§ `$queryRaw` ã¯ middleware ã‚’ä»‹ã•ãªã„ã¨èªè­˜ã—ã¦ã„ãŸã®ã¯ã€è¿”ã‚Šå€¤ãŒæ–‡å­—åˆ—å‹ã§ã‚ã£ãŸãŸã‚ã€middleware ã®å‡¦ç†ãŒé©ç”¨ã•ã‚Œã¦ã„ãªã‹ã£ãŸã“ã¨ãŒç†ç”±ã§ã—ãŸã€‚

# å¯¾å¿œã—ãŸã“ã¨

åŸå› ãŒã‚ã‹ã£ãŸã®ã§ã€ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰å†…ã® `$queryRaw` ã‚’ä½¿ç”¨ã—ã¦æ—¥æ™‚ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã„ã‚‹ç®‡æ‰€ã‚’ä¿®æ­£ã—ã¾ã—ãŸã€‚

ã¾ãŸã€ä»Šå›ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§æŒ™å‹•ãŒå¤‰ã‚ã£ãŸç®‡æ‰€ã‚’ä»Šå¾Œã‚‚æ¤œçŸ¥ã§ãã‚‹ã‚ˆã†ã€ä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚

::::details è¿½åŠ ã—ãŸãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰

```TypeScript
describe('Prisma5.19.1 queryRawã®Dateã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«é–¢ã‚ã‚‹æŒ™å‹•ç¢ºèª', () => {
  // Prismaã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ã‚ˆã£ã¦queryRawã®æŒ™å‹•ãŒå¤‰åŒ–ã—ãŸã“ã¨ãŒã‚ã£ãŸãŸã‚ä»Šå¾Œå¤‰æ›´ã«æ°—ä»˜ã‘ã‚‹ã‚ˆã†ãƒ†ã‚¹ãƒˆè¿½åŠ 
  describe('ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦queryRawã«æ¸¡ã™æ™‚', () => {
    it("DBä¸Šã§ '2024-10-01' ã¨è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹DATEã‚«ãƒ©ãƒ ã¨ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦ new Date('2024-10-01') ã§ç”Ÿæˆã—ãŸDateã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã—ã¦æ¯”è¼ƒã™ã‚‹ã¨ã€ä¸€è‡´ã—ãªã„", async () => {
      const jsDateObject = new Date('2024-10-01');
      const [{ result }] = await service.$queryRaw<
        { result: boolean }[]
      >`SELECT CAST('2024-10-01' AS DATE) = ${jsDateObject} AS result`;
      expect(result).toBe(false);
    });

    it("DBä¸Šã§ '2024-10-01' ã¨è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹DATEã‚«ãƒ©ãƒ ã¨ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦æ–‡å­—åˆ—ã® '2024-10-01' ã‚’æ¸¡ã—ã¦CASTã—ãŸä¸Šã§æ¯”è¼ƒã™ã‚‹ã¨ã€ä¸€è‡´ã™ã‚‹", async () => {
      const dateString = '2024-10-01';
      const [{ result }] = await service.$queryRaw<
        { result: boolean }[]
      >`SELECT CAST('2024-10-01' AS DATE) = DATE(${dateString}) AS result`;
      expect(result).toBe(true);
    });

    it("DBä¸Šã§ '2024-10-01 00:00:00' ã¨è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹TIMESTAMPã‚«ãƒ©ãƒ ã¨ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦ new Date('2024-10-01T00:00:00.000Z') ã§ç”Ÿæˆã—ãŸDateã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã—ã¦æ¯”è¼ƒã™ã‚‹ã¨ã€ä¸€è‡´ã—ãªã„", async () => {
      const jsDateObject = new Date('2024-10-01T00:00:00.000Z');
      const [{ result }] = await service.$queryRaw<
        { result: boolean }[]
      >`SELECT CAST('2024-10-01 00:00:00' AS TIMESTAMP) = ${jsDateObject} AS result`;
      expect(result).toBe(false);
    });

    it("DBä¸Šã§ '2024-10-01 00:00:00' ã¨è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹TIMESTAMPã‚«ãƒ©ãƒ ã¨ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦æ–‡å­—åˆ—ã® '2024-10-01 00:00:00' ã‚’æ¸¡ã—ã¦CASTã—ãŸä¸Šã§æ¯”è¼ƒã™ã‚‹ã¨ã€ä¸€è‡´ã™ã‚‹", async () => {
      const dateString = '2024-10-01 00:00:00';
      const [{ result }] = await service.$queryRaw<
        { result: boolean }[]
      >`SELECT CAST('2024-10-01 00:00:00' AS TIMESTAMP) = CAST(${dateString} AS TIMESTAMP) AS result`;
      expect(result).toBe(true);
    });
  });

  describe('queryRawã‹ã‚‰çµæœã¨ã—ã¦è¿”ã•ã‚Œã‚‹æ™‚', () => {
    it("DBä¸Šã§ '2024-10-01' ã¨è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹DATEã‚«ãƒ©ãƒ ã‚’å–å¾—ã—ãŸæ™‚ã®çµæœ", async () => {
      const [{ jst_date }] = await service.$queryRaw<
        { jst_date: Date }[]
      >`SELECT CAST('2024-10-01' AS DATE) AS jst_date`;
      expect(jst_date.getFullYear()).toBe(2024);
      expect(jst_date.getMonth()).toBe(9);
      expect(jst_date.getDate()).toBe(1);
      expect(jst_date.getHours()).toBe(0);
      expect(jst_date.getMinutes()).toBe(0);
    });

    it("DBä¸Šã§ '2024-10-01 00:00:00' ã¨è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹TIMESTAMPã‚«ãƒ©ãƒ ã‚’å–å¾—ã—ãŸæ™‚ã®çµæœ", async () => {
      const [{ jst_timestamp }] = await service.$queryRaw<
        { jst_timestamp: Date }[]
      >`SELECT CAST('2024-10-01 00:00:00' AS TIMESTAMP) AS jst_timestamp`;
      expect(jst_timestamp.getFullYear()).toBe(2024);
      expect(jst_timestamp.getMonth()).toBe(9);
      expect(jst_timestamp.getDate()).toBe(1);
      expect(jst_timestamp.getHours()).toBe(0);
      expect(jst_timestamp.getMinutes()).toBe(0);
    });
  });
});
```

::::

# ãŠã‚ã‚Šã«

ç´†ä½™æ›²æŠ˜ã‚ã‚Šã¾ã—ãŸãŒã€ç„¡äº‹ Prisma ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ãŒã§ãã¾ã—ãŸã€‚
ä»Šå›ãƒãƒã£ãŸãƒã‚¤ãƒ³ãƒˆã¯ Prisma ã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³å•é¡Œã‚’ middleware ã§è§£æ¶ˆã—ã¦ã„ã‚‹å ´åˆã«ã®ã¿èµ·ã“ã‚‹äº‹è±¡ã§ã™ãŒã€å‚è€ƒã«ãªã‚Œã°å¬‰ã—ã„ã§ã™ã€‚

æ˜æ—¥ã® Medleyï¼ˆãƒ¡ãƒ‰ãƒ¬ãƒ¼ï¼‰ Advent Calendar 2024 ã¯[@m-d](https://qiita.com/m-d)ã•ã‚“ã§ã™ã€‚ãŠæ¥½ã—ã¿ã«ï¼
